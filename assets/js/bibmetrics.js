!async function(){const e="{{ '/assets/data/citations.json' | relative_url }}";try{const n=await fetch(e,{cache:"no-store"});if(!n.ok)throw new Error("No citations.json");const o=await n.json(),c=document.getElementById("bib-metrics"),a=document.getElementById("metric-total"),i=document.getElementById("metric-h"),d=document.getElementById("metric-i10-wrap"),s=document.getElementById("metric-i10"),r=document.getElementById("metric-updated"),l=document.getElementById("metric-source-select"),m=o.sources||{};function t(e){const t=m[e];t&&(a.textContent=t.total_citations??"\u2014",i.textContent=t.h_index??"\u2014","number"==typeof t.i10_index?(s.textContent=t.i10_index,d.hidden=!1):d.hidden=!0,r.textContent=t.updated?`\xb7 updated ${t.updated}`:"")}Object.keys(m).forEach(e=>{const t=document.createElement("option");t.value=e,t.textContent=e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase()),l.appendChild(t)}),l.addEventListener("change",()=>t(l.value)),l.options.length>0&&(l.value=l.options[0].value,t(l.value)),c.hidden=!1}catch(u){console.warn("Citation metrics unavailable:",u)}}();